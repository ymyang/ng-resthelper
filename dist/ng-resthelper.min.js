angular.module("ng-resthelper",[]).factory("RestApi",function(r,n,a){function t(t,u,i,o){var s=n.defer(),g=e(t,u,i,o);return r(g).then(function(r){a.debug("requert uri:",u,", method:",t,", data:",JSON.stringify(i),", res data:",JSON.stringify(r.data)),s.resolve(r.data)},function(r){a.error("requert uri:",u,", method:",t,", data:",JSON.stringify(i),", res:",JSON.stringify(r)),s.reject(r.status)}),s.promise}function e(r,n,a,t){return t=t||{},"GET"!==r&&"DELETE"!=r||(t.params=t.params||{},angular.extend(t.params,a)),{method:r,url:n,params:t.params||{},data:a||{},headers:{"Content-Type":"application/json;charset=utf-8"},cache:!1,timeout:6e4}}function u(r,n,a){return t("GET",r,n,a)}function i(r,n,a){return t("POST",r,n,a)}function o(r,n,a){return t("PUT",r,n,a)}function s(r,n,a){return t("DELETE",r,n,a)}function g(r,n,a,t){var e=t[0].toLowerCase(),g=n+t[1];"get"===e?r[a]=angular.bind(r,u,g):"post"===e?r[a]=angular.bind(r,i,g):"put"===e?r[a]=angular.bind(r,o,g):"remove"===e&&(r[a]=angular.bind(r,s,g))}return function(r){var n={},a=r.baseuri||"";for(var t in r){var e={},c=r[t],l=a+c.uri;n[t]=e;for(var d in c){var f=c[d];"get"===d?angular.isFunction(f)?e.get=f:e.get=angular.bind(e,u,l):"post"===d?angular.isFunction(f)?e.post=f:e.post=angular.bind(e,i,l):"put"===d?angular.isFunction(f)?e.put=f:e.put=angular.bind(e,o,l):"remove"===d?angular.isFunction(f)?e.remove=f:e.remove=angular.bind(e,s,l):angular.isArray(f)?g(e,a,d,f):angular.isFunction(f)&&(e[d]=f)}}return console.log("rest api:",n),n}});